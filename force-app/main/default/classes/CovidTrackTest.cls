@isTest
public with sharing class CovidTrackTest {
 
    @isTest static void testSetData(){

        Test.startTest();
        HTTPMockFactory mock = new HTTPMockFactory(200,'Ok','[{"date":20210307,"states":56,"positive":28756489,"negative":74582825,"pending":11808,"hospitalizedCurrently":40199,"hospitalizedCumulative":776361,"inIcuCurrently":8134,"inIcuCumulative":45475,"onVentilatorCurrently":2802,"onVentilatorCumulative":4281,"dateChecked":"2021-03-07T24:00:00Z","death":515151,"hospitalized":776361,"totalTestResults":363825123,"lastModified":"2021-03-07T24:00:00Z","recovered":null,"total":0,"posNeg":0,"deathIncrease":842,"hospitalizedIncrease":726,"negativeIncrease":131835,"positiveIncrease":41835,"totalTestResultsIncrease":1170059,"hash":"a80d0063822e251249fd9a44730c49cb23defd83"},{"date":20210306,"states":56,"positive":28714654,"negative":74450990,"pending":11783,"hospitalizedCurrently":41401,"hospitalizedCumulative":775635,"inIcuCurrently":8409,"inIcuCumulative":45453,"onVentilatorCurrently":2811,"onVentilatorCumulative":4280,"dateChecked":"2021-03-06T24:00:00Z","death":514309,"hospitalized":775635,"totalTestResults":362655064,"lastModified":"2021-03-06T24:00:00Z","recovered":null,"total":0,"posNeg":0,"deathIncrease":1680,"hospitalizedIncrease":503,"negativeIncrease":143835,"positiveIncrease":60015,"totalTestResultsIncrease":1430992,"hash":"dae5e558c24adb86686bbd58c08cce5f610b8bb0"},{"date":20210305,"states":56,"positive":28654639,"negative":74307155,"pending":12213,"hospitalizedCurrently":42541,"hospitalizedCumulative":775132,"inIcuCurrently":8634,"inIcuCumulative":45373,"onVentilatorCurrently":2889,"onVentilatorCumulative":4275,"dateChecked":"2021-03-05T24:00:00Z","death":512629,"hospitalized":775132,"totalTestResults":361224072,"lastModified":"2021-03-05T24:00:00Z","recovered":null,"total":0,"posNeg":0,"deathIncrease":2221,"hospitalizedIncrease":2781,"negativeIncrease":271917,"positiveIncrease":68787,"totalTestResultsIncrease":1744417,"hash":"724844c01659d0103801c57c0f72bf8cc8ab025c"},{"date":20210304,"states":56,"positive":28585852,"negative":74035238,"pending":12405,"hospitalizedCurrently":44172,"hospitalizedCumulative":772351,"inIcuCurrently":8970,"inIcuCumulative":45293,"onVentilatorCurrently":2973,"onVentilatorCumulative":4267,"dateChecked":"2021-03-04T24:00:00Z","death":510408,"hospitalized":772351,"totalTestResults":359479655,"lastModified":"2021-03-04T24:00:00Z","recovered":null,"total":0,"posNeg":0,"deathIncrease":1743,"hospitalizedIncrease":1530,"negativeIncrease":177957,"positiveIncrease":65487,"totalTestResultsIncrease":1590984,"hash":"5c549ad30f9abf48dc5de36d20fa707014be1ff3"},{"date":20210303,"states":56,"positive":28520365,"negative":73857281,"pending":11778,"hospitalizedCurrently":45462,"hospitalizedCumulative":770821,"inIcuCurrently":9359,"inIcuCumulative":45214,"onVentilatorCurrently":3094,"onVentilatorCumulative":4260,"dateChecked":"2021-03-03T24:00:00Z","death":508665,"hospitalized":770821,"totalTestResults":357888671,"lastModified":"2021-03-03T24:00:00Z","recovered":null,"total":0,"posNeg":0,"deathIncrease":2449,"hospitalizedIncrease":2172,"negativeIncrease":267001,"positiveIncrease":66836,"totalTestResultsIncrease":1406795,"hash":"fef6c425d2b773a9221fe353f13852f3e4a4bfb0"},{"date":20210302,"states":56,"positive":28453529,"negative":73590280,"pending":11196,"hospitalizedCurrently":46388,"hospitalizedCumulative":768649,"inIcuCurrently":9465,"inIcuCumulative":45084,"onVentilatorCurrently":3169,"onVentilatorCumulative":4257,"dateChecked":"2021-03-02T24:00:00Z","death":506216,"hospitalized":768649,"totalTestResults":356481876,"lastModified":"2021-03-02T24:00:00Z","recovered":null,"total":0,"posNeg":0,"deathIncrease":1728,"hospitalizedIncrease":1871,"negativeIncrease":255779,"positiveIncrease":54248,"totalTestResultsIncrease":1343519,"hash":"f90cfd6129805f923153eb8da22a86b75eedf8fd"}]');
        Test.setMock(HttpCalloutMock.class, mock);
        CovidTracking_CC.setData();
        List<covid_tracking__c>  newList = CovidTracking_CC.getRecords();
        Assert.isTrue(newList.size()== 6);
        CovidTracking_CC.deleteItem(newList.get(0).Id);
        List<covid_tracking__c>  newListv2 = CovidTracking_CC.getRecords();
        Assert.isTrue(newListv2.size()== 5);
        Test.stopTest();
    }
}